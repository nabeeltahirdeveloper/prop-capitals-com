# ═════════════════════════════════════════════════════════════════════════════
#  Props Capital — Environment Variables
#
#  SETUP:
#    cp .env.example .env
#    Fill in every value marked  ← REQUIRED
#    Then run:  docker compose up --build
# ═════════════════════════════════════════════════════════════════════════════


# ─────────────────────────────────────────────────────────────────────────────
#  DATABASE
# ─────────────────────────────────────────────────────────────────────────────

# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://user:password@your-db-host:5432/props-capital   # ← REQUIRED


# ─────────────────────────────────────────────────────────────────────────────
#  AUTHENTICATION
# ─────────────────────────────────────────────────────────────────────────────

# Use a long random string — e.g. openssl rand -base64 48
JWT_SECRET=change-me-to-a-very-long-random-secret                          # ← REQUIRED

# Token lifetime.  Examples: 1d  7d  24h  30m
JWT_EXPIRES_IN=1d


# ─────────────────────────────────────────────────────────────────────────────
#  APP
# ─────────────────────────────────────────────────────────────────────────────

# Backend port (also controls which host port docker-compose exposes)
PORT=5101

# production | development
NODE_ENV=production


# ─────────────────────────────────────────────────────────────────────────────
#  EMAIL (SendGrid)
# ─────────────────────────────────────────────────────────────────────────────

SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxx                                   # ← REQUIRED
SENDGRID_FROM=noreply@yourdomain.com                                        # ← REQUIRED

# Set to false to skip sending emails in local/test environments
EMAIL_ENABLED=true

# Milliseconds before an email send attempt times out
EMAIL_TIMEOUT_MS=10000

# Hard override — true disables all outgoing email regardless of EMAIL_ENABLED
DISABLE_EMAIL=false


# ─────────────────────────────────────────────────────────────────────────────
#  MARKET DATA
# ─────────────────────────────────────────────────────────────────────────────

# Twelve Data API  (https://twelvedata.com)
TWELVE_DATA_API_KEY=your-twelve-data-api-key                               # ← REQUIRED

# Massive.com  (https://massive.com)
MASSIVE_API_KEY=your-massive-api-key                                        # ← REQUIRED
MASSIVE_WS_URL=wss://socket.massive.com/forex


# ─────────────────────────────────────────────────────────────────────────────
#  AI
# ─────────────────────────────────────────────────────────────────────────────

OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxx                                 # ← REQUIRED


# ─────────────────────────────────────────────────────────────────────────────
#  FRONTEND BUILD-TIME VARIABLES  (baked into the JS bundle by Vite)
#
#  ⚠️  Changing these requires a rebuild:
#       docker compose up --build frontend admin
#
#  HOW IT WORKS IN DOCKER:
#  The frontends connect to their own Nginx server (same port they are served
#  from) which then proxies API and WebSocket traffic to the backend container
#  over Docker's internal network.  This avoids cross-origin issues and the
#  macOS Docker Desktop userspace-proxy problem with WebSocket/SSE.
#
#  VITE_FRONTEND_URL = the public URL of the trader frontend (default: http://localhost:3000)
#  VITE_ADMIN_URL    = the public URL of the admin panel     (default: http://localhost:3001)
#
#  In production set these to your real domains, e.g.:
#    VITE_FRONTEND_URL=https://app.prop-capitals.com
#    VITE_ADMIN_URL=https://admin.prop-capitals.com
# ─────────────────────────────────────────────────────────────────────────────

VITE_FRONTEND_URL=http://localhost:3000
VITE_ADMIN_URL=http://localhost:3001
